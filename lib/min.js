var y,g;import{unpack as i}from"msgpackr";g=r=>{var e;return e=r.length,e?(1===e&&([e]=r,Array.isArray(e)||(r=e)),JSON.stringify(r)):""},y="Content-Type";export default n=>{var s,u,c={},r=(r,e,t)=>{u=r,r={"Accept-Language":e||""},t?r.id=t:delete c.id,Object.assign(c,r)},d=async(e,t)=>{var r,a;try{a=await fetch(e,t)}catch(r){return n(r,d,e,t)}return[200,304].includes(a.status)?(r=await a.arrayBuffer()).byteLength?i(new Uint8Array(r)):void 0:n(a,d,e,t)},a=i=>new Proxy(()=>{},{get:(r,e)=>{var t=i;return t&&(t+="."),a(t+e)},set:(r,e,t)=>((s=s||{...c})[e]=t,!0),apply:(r,e,t)=>{var a,n;return s?(a=s,s=void 0):a={...c},n={credentials:"include",headers:a,method:"POST"},t.length&&(n.body=g(t),y in a||(a[y]="")),d(u+i,n)}});return[a(""),r]};