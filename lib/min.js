var c;import{unpack as d}from"msgpackr";c=r=>{var a;return a=r.length,a?(1===a&&([a]=r,Array.isArray(a)||(r=a)),JSON.stringify(r)):""};export default i=>{var s,o,u={"content-type":""},r=(r,a,e)=>{o=r,r={"accept-language":a||""},e!==location.hostname?r.id=e:delete u.id,Object.assign(u,r)},y=async(r,a,e)=>{var t,n=await fetch(o+a,{method:"POST",body:c(e),headers:r});return[200,304].includes(n.status)?(t=await n.arrayBuffer()).byteLength?d(new Uint8Array(t)):void 0:i(n,y,r,a,e)},t=n=>new Proxy(()=>{},{get:(r,a)=>{var e=n;return e&&(e+="."),t(e+a)},set:(r,a,e)=>((s=s||{...u})[a]=e,!0),apply:(r,a,e)=>{var t;return s?(t=s,s=void 0):t=u,y(t,n,e)}});return[t(""),r]};