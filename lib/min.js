var c;import{unpack as d}from"msgpackr";c=r=>{var a;return a=r.length,a?(1===a&&([a]=r,Array.isArray(a)||(r=a)),JSON.stringify(r)):""};export default(i,...r)=>{var s,o,e,u,y={"content-type":""},a=(r,a,t)=>{u=r,r={"accept-language":a||""},t!==location.hostname&&(r.id=t),Object.assign(y,r)};return a(...r),o=async(r,a,t)=>{var e,n=await fetch(u+a,{method:"POST",body:c(t),headers:r});return[200,304].includes(n.status)?(e=await n.arrayBuffer()).byteLength?d(new Uint8Array(e)):void 0:i(n,o,r,a,t)},[(e=n=>new Proxy(()=>{},{get:(r,a)=>{var t=n;return t&&(t+="."),e(t+a)},set:(r,a,t)=>((s=s||{...y})[a]=t,!0),apply:(r,a,t)=>{var e;return s?(e=s,s=void 0):e=y,o(e,n,t)}}))(""),a]};