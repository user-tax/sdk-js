var c;import{unpack as f}from"msgpackr";c=e=>{var r;return r=e.length,r?(1===r&&([r]=e,Array.isArray(r)||(e=r)),JSON.stringify(e)):""};export default o=>{var s,u,y={"Content-Type":""},a=async(r,t)=>{var e,a,n,s,i,c;if(a=t["headers"],a)for(c of Object.entries(y))[n,i]=c,n in a||(a[n]=i);else t.headers=y;try{s=await fetch(u+r,t)}catch(e){return o(e,d,r,t)}return[200,304].includes(s.status)?(e=await s.arrayBuffer()).byteLength?f(new Uint8Array(e)):void 0:o(s,d,r,t)},n=[],d=(t,a)=>new Promise((e,r)=>n.push([t,a,e,r])),e=(e,r)=>{var t;u=e,y["Accept-Language"]=r||"",d=a;for(t of n)d(...t.slice(0,2)).then(...t.slice(2));n=[]},i=n=>new Proxy(()=>{},{get:(e,r)=>{var t=n;return t&&(t+="."),i(t+r)},set:(e,r,t)=>((s=s||{})[r]=t,!0),apply:(e,r,t)=>{var a;return s&&(a=s,s=void 0),a={credentials:"include",headers:a,method:"POST"},t.length&&(a.body=c(t)),d(n,a)}});return[i(""),e]};