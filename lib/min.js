var y;import{unpack as i}from"msgpackr";y=r=>{var e;return e=r.length,e?(1===e&&([e]=r,Array.isArray(e)||(r=e)),JSON.stringify(r)):""};export default(t,a)=>{var n=async(r,e)=>{r=await fetch(a+r,{method:"POST",body:y(e),headers:{"content-type":"json"}});return[200,304].includes(r.status)?(e=await r.arrayBuffer()).byteLength?i(new Uint8Array(e),{moreTypes:!0,int64AsNumber:!0}):void 0:t(r)},s=a=>new Proxy(()=>{},{get:(r,e)=>{var t=a;return t&&(t+="."),s(t+e)},apply:(r,e,t)=>n(a,t)});return[s(""),r=>{a=r}]};