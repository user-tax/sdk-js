var c;import{unpack as d}from"msgpackr";c=r=>{var a;return a=r.length,a?(1===a&&([a]=r,Array.isArray(a)||(r=a)),JSON.stringify(r)):""};export default(i,...r)=>{var s,o,t,u,y={"content-type":""},a=(r,a,e)=>{u=r,r={"accept-language":a||""},e!==location.hostname?r.id=e:delete y.id,Object.assign(y,r)};return a(...r),o=async(r,a,e)=>{var t,n=await fetch(u+a,{method:"POST",body:c(e),headers:r});return[200,304].includes(n.status)?(t=await n.arrayBuffer()).byteLength?d(new Uint8Array(t)):void 0:i(n,o,r,a,e)},[(t=n=>new Proxy(()=>{},{get:(r,a)=>{var e=n;return e&&(e+="."),t(e+a)},set:(r,a,e)=>((s=s||{...y})[a]=e,!0),apply:(r,a,e)=>{var t;return s?(t=s,s=void 0):t=y,o(t,n,e)}}))(""),a]};