var u,d;import{unpack as p}from"msgpackr";d=r=>{var t;return t=r.length,t?(1===t&&([t]=r,Array.isArray(t)||(r=t)),JSON.stringify(r)):""},u={"content-type":""};export default(n,y)=>{var i,s=async(r,t)=>{var a,e;return i?(e=i,i=void 0):e=u,e=await fetch(y+r,{method:"POST",body:d(t),headers:e}),[200,304].includes(e.status)?(a=await e.arrayBuffer()).byteLength?p(new Uint8Array(a)):void 0:n(e,r,t,s)},o=e=>new Proxy(()=>{},{get:(r,t)=>{var a=e;return a&&(a+="."),o(a+t)},set:(r,t,a)=>((i=i||{...u})[t]=a,!0),apply:(r,t,a)=>s(e,a)});return[o(""),r=>{y=r}]};