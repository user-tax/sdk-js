var c;import{unpack as y}from"msgpackr";export{unpack}from"msgpackr";c=r=>{var e;return e=r.length,e?(1===e&&([e]=r,Array.isArray(e)||(r=e)),JSON.stringify(r)):""};export default o=>{var i,u,f={"Content-Type":""},a=async(e,t)=>{var r,a,n,i,s,c;if(a=t["headers"],a)for(c of Object.entries(f))[n,s]=c,n in a||(a[n]=s);else t.headers=f;try{i=await fetch(u+e,t)}catch(r){return o(r,p,e,t)}return[200,304].includes(i.status)?(r=await i.arrayBuffer()).byteLength?y(new Uint8Array(r)):void 0:o(i,p,e,t)},n=[],p=(t,a)=>new Promise((r,e)=>n.unshift([t,a,r,e])),r=(r,e)=>{var t;for(u=r,f["Accept-Language"]=e||"",p=a;;){if(!(t=n.pop()))break;p(...t.slice(0,2)).then(...t.slice(2))}},s=n=>new Proxy(()=>{},{get:(r,e)=>{var t=n;return t&&(t+="."),s(t+e)},set:(r,e,t)=>((i=i||{})[e]=t,!0),apply:(r,e,t)=>{var a;return i&&(a=i,i=void 0),a={credentials:"include",headers:a,method:"POST"},t.length&&(a.body=c(t)),p(n,a)}});return[s(""),r]};