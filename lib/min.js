var c;import{unpack as o}from"msgpackr";c=r=>{var e;return e=r.length,e?(1===e&&([e]=r,Array.isArray(e)||(r=e)),JSON.stringify(r)):""};export default i=>{var s,d,u={"Content-Type":""},r=(r,e,a)=>{d=r,r={"Accept-Language":e||""},a?r.id=a:delete u.id,Object.assign(u,r)},y=async(r,e,a)=>{var t,n=await fetch(d+e,{body:c(a),credentials:"include",headers:r,method:"POST"});return[200,304].includes(n.status)?(t=await n.arrayBuffer()).byteLength?o(new Uint8Array(t)):void 0:i(n,y,r,e,a)},t=n=>new Proxy(()=>{},{get:(r,e)=>{var a=n;return a&&(a+="."),t(a+e)},set:(r,e,a)=>((s=s||{...u})[e]=a,!0),apply:(r,e,a)=>{var t;return s?(t=s,s=void 0):t=u,y(t,n,a)}});return[t(""),r]};