var c,g;import{unpack as i}from"msgpackr";g=r=>{var e;return e=r.length,e?(1===e&&([e]=r,Array.isArray(e)||(r=e)),JSON.stringify(r)):""},c="Content-Type";export default n=>{var s,d,u={},r=(r,e,t)=>{d=r,r={"Accept-Language":e||""},t?r.id=t:delete u.id,Object.assign(u,r)},y=async(r,e)=>{var t,a=await fetch(r,e);return[200,304].includes(a.status)?(t=await a.arrayBuffer()).byteLength?i(new Uint8Array(t)):void 0:n(a,y,r,e)},a=i=>new Proxy(()=>{},{get:(r,e)=>{var t=i;return t&&(t+="."),a(t+e)},set:(r,e,t)=>((s=s||{...u})[e]=t,!0),apply:(r,e,t)=>{var a,n;return s?(a=s,s=void 0):a={...u},n={credentials:"include",headers:a,method:"POST"},t.length&&(n.body=g(t),c in a||(a[c]="")),y(d+i,n)}});return[a(""),r]};