"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var y=require("msgpackr"),d=e=>{var r;return r=e.length,r?(1===r&&([r]=e,Array.isArray(r)||(e=r)),JSON.stringify(e)):""},p={"content-type":""};exports.default=(n,s)=>{var u,i=async(e,r)=>{var t,a;return u?(a=u,u=void 0):a=p,a=await fetch(s+e,{method:"POST",body:d(r),headers:a}),[200,304].includes(a.status)?(t=await a.arrayBuffer()).byteLength?(0,y.unpack)(new Uint8Array(t)):void 0:n(a,e,r,i)},o=a=>new Proxy(()=>{},{get:(e,r)=>{var t=a;return t&&(t+="."),o(t+r)},set:(e,r,t)=>((u=u||{...p})[r]=t,!0),apply:(e,r,t)=>i(a,t)});return[o(""),e=>{s=e}]};