"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var i=require("msgpackr"),y=e=>{var r;return r=e.length,r?(1===r&&([r]=e,Array.isArray(r)||(e=r)),JSON.stringify(e)):""},o="Content-Type";exports.default=n=>{var s,u,d={},e=(e,r,t)=>{u=e,e={"Accept-Language":r||""},t?e.id=t:delete d.id,Object.assign(d,e)},c=async(r,t)=>{var e,a;try{a=await fetch(r,t)}catch(e){return n(e,c,r,t)}return[200,304].includes(a.status)?(e=await a.arrayBuffer()).byteLength?(0,i.unpack)(new Uint8Array(e)):void 0:n(a,c,r,t)},a=i=>new Proxy(()=>{},{get:(e,r)=>{var t=i;return t&&(t+="."),a(t+r)},set:(e,r,t)=>((s=s||{...d})[r]=t,!0),apply:(e,r,t)=>{var a,n;return s?(a=s,s=void 0):a={...d},n={credentials:"include",headers:a,method:"POST"},t.length&&(n.body=y(t),o in a||(a[o]="")),c(u+i,n)}});return[a(""),e]};