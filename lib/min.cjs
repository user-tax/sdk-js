"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var u=require("msgpackr"),o=r=>{var e;return e=r.length,e?(1===e&&([e]=r,Array.isArray(e)||(r=e)),JSON.stringify(r)):""};exports.default=(t,a)=>{var s=async(r,e)=>{r=await fetch(a+r,{method:"POST",body:o(e),headers:{"content-type":"json"}});return[200,304].includes(r.status)?(e=await r.arrayBuffer())?(0,u.unpack)(e):void 0:t(r)},n=a=>new Proxy(()=>{},{get:(r,e)=>{var t=a;return t&&(t+="."),n(t+e)},apply:(r,e,t)=>s(a,t)});return[n(""),r=>{a=r}]};