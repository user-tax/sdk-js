"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o=require("msgpackr"),y=e=>{var r;return r=e.length,r?(1===r&&([r]=e,Array.isArray(r)||(e=r)),JSON.stringify(e)):""};exports.default=i=>{var s,u,d={"content-type":""},e=(e,r,t)=>{u=e,e={"accept-language":r||""},t?e.id=t:delete d.id,Object.assign(d,e)},c=async(e,r,t)=>{var a,n=await fetch(u+r,{body:y(t),credentials:"include",headers:e,method:"POST"});return[200,304].includes(n.status)?(a=await n.arrayBuffer()).byteLength?(0,o.unpack)(new Uint8Array(a)):void 0:i(n,c,e,r,t)},a=n=>new Proxy(()=>{},{get:(e,r)=>{var t=n;return t&&(t+="."),a(t+r)},set:(e,r,t)=>((s=s||{...d})[r]=t,!0),apply:(e,r,t)=>{var a;return s?(a=s,s=void 0):a=d,c(a,n,t)}});return[a(""),e]};